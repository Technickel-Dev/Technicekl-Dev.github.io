import{s as ae,v as G,w as J,b as A,f as d,o as _,i as S,h as b,n as x,K as ie,e as E,a as H,l as oe,c as y,m as $,g as q,z as K,y as j,H as ee,J as ce,k as ue,D as fe,t as U,d as Q,j as W,L as X}from"../chunks/scheduler.48785eb3.js";import{S as ne,i as le,c as de,a as ve,m as me,t as Y,b as Z,e as _e,d as he,f as k,g as pe}from"../chunks/index.214faea7.js";import{p as ge}from"../chunks/stores.123727be.js";function Ie(a){let t,r,i,l;return{c(){t=G("svg"),r=G("path"),i=G("path"),this.h()},l(e){t=J(e,"svg",{viewBox:!0,class:!0});var n=A(t);r=J(n,"path",{d:!0,class:!0}),A(r).forEach(d),i=J(n,"path",{d:!0,class:!0}),A(i).forEach(d),n.forEach(d),this.h()},h(){_(r,"d","M50,5A45 45 0 1 1 49.9999 5"),_(r,"class","svelte-1nldb2a"),_(i,"d",l=a[0]()),_(i,"class","svelte-1nldb2a"),_(t,"viewBox","0 0 100 100"),_(t,"class","svelte-1nldb2a")},m(e,n){S(e,t,n),b(t,r),b(t,i)},p(e,[n]){n&1&&l!==(l=e[0]())&&_(i,"d",l)},i:x,o:x,d(e){e&&d(t)}}}function we(a,t,r){let i,{value:l=0}=t,{max:e=100}=t;return a.$$set=n=>{"value"in n&&r(1,l=n.value),"max"in n&&r(2,e=n.max)},a.$$.update=()=>{a.$$.dirty&6&&r(0,i=()=>{if(l<=0)return"";if(l>=e)return"M50,5A45 45 0 1 1 49.9999 5";{const n=Math.PI*2*(l/e),I=50+Math.cos(n-Math.PI/2)*45,w=50+Math.sin(n-Math.PI/2)*45;let o="M50,5";return n>Math.PI&&(o+="A45 45 0 0 1 50 95"),o+=`A45 45 0 0 1 ${I} ${w}`,o}})},[i,l,e]}class Te extends ne{constructor(t){super(),le(this,t,we,Ie,ae,{value:1,max:2})}}function N(a,{delay:t=0,duration:r=400,easing:i=ie}={}){const l=+getComputedStyle(a).opacity;return{delay:t,duration:r,easing:i,css:e=>`opacity: ${e*l}`}}const te=[{name:"Ace of cups",image:"ace_of_cups",description:"Represents new emotional beginnings, love, and creative inspiration. It symbolizes fresh emotions, deep connections, and a positive outlook on relationships.",reverse_description:"In reverse, indicates obstacles in establishing meaningful emotional connections, creative hindrances, and unresolved inner conflicts. There may be a need for emotional healing and self-reflection."}];function se(a){let t,r,i,l,e,n=a[3].name+"",I,w,o,p,h=(a[1]?a[3].reverse_description:a[3].description)+"",M,g,v;return{c(){t=E("div"),r=U(a[2]),l=H(),e=E("div"),I=U(n),o=H(),p=E("div"),M=U(h),this.h()},l(s){t=y(s,"DIV",{class:!0});var u=A(t);r=Q(u,a[2]),u.forEach(d),l=q(s),e=y(s,"DIV",{class:!0});var D=A(e);I=Q(D,n),D.forEach(d),o=q(s),p=y(s,"DIV",{class:!0});var C=A(p);M=Q(C,h),C.forEach(d),this.h()},h(){_(t,"class","name svelte-1i7vgrw"),_(e,"class","card-name svelte-1i7vgrw"),j(e,"reverse",a[1]),_(p,"class","card-description svelte-1i7vgrw")},m(s,u){S(s,t,u),b(t,r),S(s,l,u),S(s,e,u),b(e,I),S(s,o,u),S(s,p,u),b(p,M),v=!0},p(s,u){(!v||u&4)&&W(r,s[2]),(!v||u&8)&&n!==(n=s[3].name+"")&&W(I,n),(!v||u&2)&&j(e,"reverse",s[1]),(!v||u&10)&&h!==(h=(s[1]?s[3].reverse_description:s[3].description)+"")&&W(M,h)},i(s){v||(s&&X(()=>{v&&(i||(i=k(t,N,{},!0)),i.run(1))}),s&&X(()=>{v&&(w||(w=k(e,N,{},!0)),w.run(1))}),s&&X(()=>{v&&(g||(g=k(p,N,{},!0)),g.run(1))}),v=!0)},o(s){s&&(i||(i=k(t,N,{},!1)),i.run(0)),s&&(w||(w=k(e,N,{},!1)),w.run(0)),s&&(g||(g=k(p,N,{},!1)),g.run(0)),v=!1},d(s){s&&(d(t),d(l),d(e),d(o),d(p)),s&&i&&i.end(),s&&w&&w.end(),s&&g&&g.end()}}}function De(a){let t,r="",i,l,e,n,I,w,o,p,h,M,g,v,s='<p class="back-text svelte-1i7vgrw">Type !tarot to get a reading</p>',u,D,C,O,V;I=new Te({props:{value:a[4]}});let m=a[0]&&se(a);return{c(){t=E("script"),t.innerHTML=r,l=H(),e=E("div"),n=E("div"),de(I.$$.fragment),w=H(),o=E("div"),p=E("div"),h=E("img"),g=H(),v=E("div"),v.innerHTML=s,u=H(),D=E("div"),m&&m.c(),this.h()},l(c){const T=oe("svelte-1nbh741",document.head);t=y(T,"SCRIPT",{src:!0,"data-svelte-h":!0}),$(t)!=="svelte-i7ndq0"&&(t.innerHTML=r),T.forEach(d),l=q(c),e=y(c,"DIV",{class:!0,role:!0});var P=A(e);n=y(P,"DIV",{class:!0});var f=A(n);ve(I.$$.fragment,f),f.forEach(d),w=q(P),o=y(P,"DIV",{class:!0});var L=A(o);p=y(L,"DIV",{class:!0});var B=A(p);h=y(B,"IMG",{src:!0,alt:!0,class:!0}),B.forEach(d),g=q(L),v=y(L,"DIV",{class:!0,"data-svelte-h":!0}),$(v)!=="svelte-7l81gw"&&(v.innerHTML=s),L.forEach(d),P.forEach(d),u=q(c),D=y(c,"DIV",{class:!0});var R=A(D);m&&m.l(R),R.forEach(d),this.h()},h(){K(t.src,i="/tarot/tmi.min.js")||_(t,"src",i),_(n,"class","progress-container svelte-1i7vgrw"),K(h.src,M="/tarot/"+a[3].image+".jpg")||_(h,"src",M),_(h,"alt","Tarot Card"),_(h,"class","svelte-1i7vgrw"),j(h,"reverse",a[1]),_(p,"class","front svelte-1i7vgrw"),_(v,"class","back svelte-1i7vgrw"),_(o,"class","card svelte-1i7vgrw"),j(o,"active",a[0]),_(e,"class","container svelte-1i7vgrw"),_(e,"role","main"),_(D,"class","text-container svelte-1i7vgrw")},m(c,T){b(document.head,t),S(c,l,T),S(c,e,T),b(e,n),me(I,n,null),b(e,w),b(e,o),b(o,p),b(p,h),b(o,g),b(o,v),S(c,u,T),S(c,D,T),m&&m.m(D,null),C=!0,O||(V=[ee(e,"mouseenter",a[5]),ee(e,"mouseleave",a[6])],O=!0)},p(c,[T]){const P={};T&16&&(P.value=c[4]),I.$set(P),(!C||T&8&&!K(h.src,M="/tarot/"+c[3].image+".jpg"))&&_(h,"src",M),(!C||T&2)&&j(h,"reverse",c[1]),(!C||T&1)&&j(o,"active",c[0]),c[0]?m?(m.p(c,T),T&1&&Y(m,1)):(m=se(c),m.c(),Y(m,1),m.m(D,null)):m&&(pe(),Z(m,1,1,()=>{m=null}),_e())},i(c){C||(Y(I.$$.fragment,c),Y(m),C=!0)},o(c){Z(I.$$.fragment,c),Z(m),C=!1},d(c){c&&(d(l),d(e),d(u),d(D)),d(t),he(I),m&&m.d(),O=!1,ce(V)}}}const Me=1e3,re=2e4,z=1500;function be(a,t,r){let i,l,e;ue(a,ge,f=>r(14,e=f));const n=2*z;let I,w=0,o=!1,p=!1,h=!1,M=!1,g=[],v="hello-world",s=te[0],u=0,D=0;fe(async()=>{I=e.url.searchParams.get("username"),r(7,w=parseInt(e.url.searchParams.get("cardDelaySeconds"))),P()});const C=f=>{if(f){let L=f*Me;return L>n?L:re}return re},O=()=>{r(0,o=!0)},V=()=>{r(0,o=!1)},m=f=>{const L=Math.floor(Math.random()*f.length);return f[L]},c=()=>{let f=Math.random()*100;console.log("Reverse Chance:",f),r(1,p=f<25),r(3,s=m(te))},T=()=>{r(8,u=Date.now()),M||(r(9,D=u+l),M=!0,console.log("Inititalize time"));let f=D-u;if(o&&f>l-z?(V(),console.log("Hide card")):!h&&f>z&&f<=l-z?(r(2,v=g[0]),c(),h=!0,console.log("Initialize card")):!o&&f>z&&f<=l-z&&(O(),console.log("Show card")),f<=0){g.shift(),h=!1,M=!1,g.length>0?(console.log("Next in queue"),setTimeout(T,100)):(console.log("All out of cards, STOOOOOP"),V());return}setTimeout(T,100)},P=()=>{const f=new window.tmi.Client({channels:[I]});f.connect(),f.on("message",(L,B,R,Ce)=>{let F=B["display-name"];console.log(`${F}: ${R}`),R=="!tarot"&&(g.length==0?(g.push(F),T()):g.push(F))})};return a.$$.update=()=>{a.$$.dirty&128&&r(10,l=C(w)),a.$$.dirty&1792&&r(4,i=100-(D-u)/l*100|0)},[o,p,v,s,i,O,V,w,u,D,l]}class Le extends ne{constructor(t){super(),le(this,t,be,De,ae,{})}}export{Le as component};
