import{s as te,e as E,a as j,m as se,c as L,o as X,f as m,g as q,b as V,L as G,p as T,K as H,h as M,i as A,B as Z,N as re,k as ae,F as ne,t as K,d as U,j as J,O as Q}from"../chunks/scheduler.e858d4f6.js";import{S as ie,i as le,c as oe,a as ce,m as fe,t as B,b as W,e as ue,d as de,j as y,g as ve}from"../chunks/index.cd7c875d.js";import{p as me}from"../chunks/stores.af0eb01c.js";import{C as _e}from"../chunks/circularProgress.1b3b034e.js";import{f as z}from"../chunks/index.53b96f8c.js";const $=[{name:"Ace of cups",image:"ace_of_cups",description:"Represents new emotional beginnings, love, and creative inspiration. It symbolizes fresh emotions, deep connections, and a positive outlook on relationships.",reverse_description:"In reverse, indicates obstacles in establishing meaningful emotional connections, creative hindrances, and unresolved inner conflicts. There may be a need for emotional healing and self-reflection."}];function x(n){let i,u,w,p,t,D=n[3].name+"",g,h,c,d,f=(n[1]?n[3].reverse_description:n[3].description)+"",C,v,l;return{c(){i=E("div"),u=K(n[2]),p=j(),t=E("div"),g=K(D),c=j(),d=E("div"),C=K(f),this.h()},l(e){i=L(e,"DIV",{class:!0});var r=V(i);u=U(r,n[2]),r.forEach(m),p=q(e),t=L(e,"DIV",{class:!0});var I=V(t);g=U(I,D),I.forEach(m),c=q(e),d=L(e,"DIV",{class:!0});var b=V(d);C=U(b,f),b.forEach(m),this.h()},h(){T(i,"class","name svelte-1i7vgrw"),T(t,"class","card-name svelte-1i7vgrw"),H(t,"reverse",n[1]),T(d,"class","card-description svelte-1i7vgrw")},m(e,r){A(e,i,r),M(i,u),A(e,p,r),A(e,t,r),M(t,g),A(e,c,r),A(e,d,r),M(d,C),l=!0},p(e,r){(!l||r&4)&&J(u,e[2]),(!l||r&8)&&D!==(D=e[3].name+"")&&J(g,D),(!l||r&2)&&H(t,"reverse",e[1]),(!l||r&10)&&f!==(f=(e[1]?e[3].reverse_description:e[3].description)+"")&&J(C,f)},i(e){l||(e&&Q(()=>{l&&(w||(w=y(i,z,{},!0)),w.run(1))}),e&&Q(()=>{l&&(h||(h=y(t,z,{},!0)),h.run(1))}),e&&Q(()=>{l&&(v||(v=y(d,z,{},!0)),v.run(1))}),l=!0)},o(e){e&&(w||(w=y(i,z,{},!1)),w.run(0)),e&&(h||(h=y(t,z,{},!1)),h.run(0)),e&&(v||(v=y(d,z,{},!1)),v.run(0)),l=!1},d(e){e&&(m(i),m(p),m(t),m(c),m(d)),e&&w&&w.end(),e&&h&&h.end(),e&&v&&v.end()}}}function pe(n){let i,u="",w,p,t,D,g,h,c,d,f,C,v,l,e='<p class="back-text svelte-1i7vgrw">Type !tarot to get a reading</p>',r,I,b,N,k;g=new _e({props:{value:n[4]}});let o=n[0]&&x(n);return{c(){i=E("script"),i.innerHTML=u,p=j(),t=E("div"),D=E("div"),oe(g.$$.fragment),h=j(),c=E("div"),d=E("div"),f=E("img"),v=j(),l=E("div"),l.innerHTML=e,r=j(),I=E("div"),o&&o.c(),this.h()},l(s){const _=se("svelte-1nbh741",document.head);i=L(_,"SCRIPT",{src:!0,"data-svelte-h":!0}),X(i)!=="svelte-i7ndq0"&&(i.innerHTML=u),_.forEach(m),p=q(s),t=L(s,"DIV",{class:!0,role:!0});var S=V(t);D=L(S,"DIV",{class:!0});var a=V(D);ce(g.$$.fragment,a),a.forEach(m),h=q(S),c=L(S,"DIV",{class:!0});var O=V(c);d=L(O,"DIV",{class:!0});var Y=V(d);f=L(Y,"IMG",{src:!0,alt:!0,class:!0}),Y.forEach(m),v=q(O),l=L(O,"DIV",{class:!0,"data-svelte-h":!0}),X(l)!=="svelte-7l81gw"&&(l.innerHTML=e),O.forEach(m),S.forEach(m),r=q(s),I=L(s,"DIV",{class:!0});var R=V(I);o&&o.l(R),R.forEach(m),this.h()},h(){G(i.src,w="/tarot/tmi.min.js")||T(i,"src",w),T(D,"class","progress-container svelte-1i7vgrw"),G(f.src,C="/tarot/"+n[3].image+".jpg")||T(f,"src",C),T(f,"alt","Tarot Card"),T(f,"class","svelte-1i7vgrw"),H(f,"reverse",n[1]),T(d,"class","front svelte-1i7vgrw"),T(l,"class","back svelte-1i7vgrw"),T(c,"class","card svelte-1i7vgrw"),H(c,"active",n[0]),T(t,"class","container svelte-1i7vgrw"),T(t,"role","main"),T(I,"class","text-container svelte-1i7vgrw")},m(s,_){M(document.head,i),A(s,p,_),A(s,t,_),M(t,D),fe(g,D,null),M(t,h),M(t,c),M(c,d),M(d,f),M(c,v),M(c,l),A(s,r,_),A(s,I,_),o&&o.m(I,null),b=!0,N||(k=[Z(t,"mouseenter",n[5]),Z(t,"mouseleave",n[6])],N=!0)},p(s,[_]){const S={};_&16&&(S.value=s[4]),g.$set(S),(!b||_&8&&!G(f.src,C="/tarot/"+s[3].image+".jpg"))&&T(f,"src",C),(!b||_&2)&&H(f,"reverse",s[1]),(!b||_&1)&&H(c,"active",s[0]),s[0]?o?(o.p(s,_),_&1&&B(o,1)):(o=x(s),o.c(),B(o,1),o.m(I,null)):o&&(ve(),W(o,1,1,()=>{o=null}),ue())},i(s){b||(B(g.$$.fragment,s),B(o),b=!0)},o(s){W(g.$$.fragment,s),W(o),b=!1},d(s){s&&(m(p),m(t),m(r),m(I)),m(i),de(g),o&&o.d(),N=!1,re(k)}}}const ge=1e3,ee=2e4,P=1500;function he(n,i,u){let w,p,t;ae(n,me,a=>u(14,t=a));const D=2*P;let g,h=0,c=!1,d=!1,f=!1,C=!1,v=[],l="hello-world",e=$[0],r=0,I=0;ne(async()=>{g=t.url.searchParams.get("username"),u(7,h=parseInt(t.url.searchParams.get("cardDelaySeconds"))),S()});const b=a=>{if(a){let O=a*ge;return O>D?O:ee}return ee},N=()=>{u(0,c=!0)},k=()=>{u(0,c=!1)},o=a=>{const O=Math.floor(Math.random()*a.length);return a[O]},s=()=>{let a=Math.random()*100;console.log("Reverse Chance:",a),u(1,d=a<25),u(3,e=o($))},_=()=>{u(8,r=Date.now()),C||(u(9,I=r+p),C=!0,console.log("Inititalize time"));let a=I-r;if(c&&a>p-P?(k(),console.log("Hide card")):!f&&a>P&&a<=p-P?(u(2,l=v[0]),s(),f=!0,console.log("Initialize card")):!c&&a>P&&a<=p-P&&(N(),console.log("Show card")),a<=0){v.shift(),f=!1,C=!1,v.length>0?(console.log("Next in queue"),setTimeout(_,100)):(console.log("All out of cards, STOOOOOP"),k());return}setTimeout(_,100)},S=()=>{const a=new window.tmi.Client({channels:[g]});a.connect(),a.on("message",(O,Y,R,Ie)=>{let F=Y["display-name"];console.log(`${F}: ${R}`),R=="!tarot"&&(v.length==0?(v.push(F),_()):v.push(F))})};return n.$$.update=()=>{n.$$.dirty&128&&u(10,p=b(h)),n.$$.dirty&1792&&u(4,w=100-(I-r)/p*100|0)},[c,d,l,e,w,N,k,h,r,I,p]}class Ee extends ie{constructor(i){super(),le(this,i,he,pe,te,{})}}export{Ee as component};
