import{s as te,e as E,a as P,C as se,c as M,x as X,f as m,g as j,b as V,O as G,q as T,N as H,h as L,i as A,E as Z,r as re,k as ae,J as ie,t as J,d as Q,j as U,Q as K}from"../chunks/scheduler.CHusSsjn.js";import{S as ne,i as le,c as oe,b as ce,m as fe,a as F,t as W,e as ue,d as de,j as y,g as ve}from"../chunks/index.D6p7BjwM.js";import{p as me}from"../chunks/stores.CphA5Xfa.js";import{C as _e}from"../chunks/circularProgress.C_IHts9G.js";import{f as q}from"../chunks/index.BCV7qUxn.js";const $=[{name:"Ace of cups",image:"ace_of_cups",description:"Represents new emotional beginnings, love, and creative inspiration. It symbolizes fresh emotions, deep connections, and a positive outlook on relationships.",reverseDescription:"In reverse, indicates obstacles in establishing meaningful emotional connections, creative hindrances, and unresolved inner conflicts. There may be a need for emotional healing and self-reflection."}];function x(i){let n,u,w,p,t,D=i[3].name+"",g,h,c,d,f=(i[1]?i[3].reverseDescription:i[3].description)+"",C,v,l;return{c(){n=E("div"),u=J(i[2]),p=P(),t=E("div"),g=J(D),c=P(),d=E("div"),C=J(f),this.h()},l(e){n=M(e,"DIV",{class:!0});var a=V(n);u=Q(a,i[2]),a.forEach(m),p=j(e),t=M(e,"DIV",{class:!0});var I=V(t);g=Q(I,D),I.forEach(m),c=j(e),d=M(e,"DIV",{class:!0});var b=V(d);C=Q(b,f),b.forEach(m),this.h()},h(){T(n,"class","name svelte-1i7vgrw"),T(t,"class","card-name svelte-1i7vgrw"),H(t,"reverse",i[1]),T(d,"class","card-description svelte-1i7vgrw")},m(e,a){A(e,n,a),L(n,u),A(e,p,a),A(e,t,a),L(t,g),A(e,c,a),A(e,d,a),L(d,C),l=!0},p(e,a){(!l||a&4)&&U(u,e[2]),(!l||a&8)&&D!==(D=e[3].name+"")&&U(g,D),(!l||a&2)&&H(t,"reverse",e[1]),(!l||a&10)&&f!==(f=(e[1]?e[3].reverseDescription:e[3].description)+"")&&U(C,f)},i(e){l||(e&&K(()=>{l&&(w||(w=y(n,q,{},!0)),w.run(1))}),e&&K(()=>{l&&(h||(h=y(t,q,{},!0)),h.run(1))}),e&&K(()=>{l&&(v||(v=y(d,q,{},!0)),v.run(1))}),l=!0)},o(e){e&&(w||(w=y(n,q,{},!1)),w.run(0)),e&&(h||(h=y(t,q,{},!1)),h.run(0)),e&&(v||(v=y(d,q,{},!1)),v.run(0)),l=!1},d(e){e&&(m(n),m(p),m(t),m(c),m(d)),e&&w&&w.end(),e&&h&&h.end(),e&&v&&v.end()}}}function pe(i){let n,u="",w,p,t,D,g,h,c,d,f,C,v,l,e='<p class="back-text svelte-1i7vgrw">Type !tarot to get a reading</p>',a,I,b,N,k;g=new _e({props:{value:i[4]}});let o=i[0]&&x(i);return{c(){n=E("script"),n.innerHTML=u,p=P(),t=E("div"),D=E("div"),oe(g.$$.fragment),h=P(),c=E("div"),d=E("div"),f=E("img"),v=P(),l=E("div"),l.innerHTML=e,a=P(),I=E("div"),o&&o.c(),this.h()},l(r){const _=se("svelte-1nbh741",document.head);n=M(_,"SCRIPT",{src:!0,"data-svelte-h":!0}),X(n)!=="svelte-i7ndq0"&&(n.innerHTML=u),_.forEach(m),p=j(r),t=M(r,"DIV",{class:!0,role:!0});var S=V(t);D=M(S,"DIV",{class:!0});var s=V(D);ce(g.$$.fragment,s),s.forEach(m),h=j(S),c=M(S,"DIV",{class:!0});var O=V(c);d=M(O,"DIV",{class:!0});var Y=V(d);f=M(Y,"IMG",{src:!0,alt:!0,class:!0}),Y.forEach(m),v=j(O),l=M(O,"DIV",{class:!0,"data-svelte-h":!0}),X(l)!=="svelte-7l81gw"&&(l.innerHTML=e),O.forEach(m),S.forEach(m),a=j(r),I=M(r,"DIV",{class:!0});var R=V(I);o&&o.l(R),R.forEach(m),this.h()},h(){G(n.src,w="/tarot/tmi.min.js")||T(n,"src",w),T(D,"class","progress-container svelte-1i7vgrw"),G(f.src,C="/tarot/"+i[3].image+".jpg")||T(f,"src",C),T(f,"alt","Tarot Card"),T(f,"class","svelte-1i7vgrw"),H(f,"reverse",i[1]),T(d,"class","front svelte-1i7vgrw"),T(l,"class","back svelte-1i7vgrw"),T(c,"class","card svelte-1i7vgrw"),H(c,"active",i[0]),T(t,"class","container svelte-1i7vgrw"),T(t,"role","main"),T(I,"class","text-container svelte-1i7vgrw")},m(r,_){L(document.head,n),A(r,p,_),A(r,t,_),L(t,D),fe(g,D,null),L(t,h),L(t,c),L(c,d),L(d,f),L(c,v),L(c,l),A(r,a,_),A(r,I,_),o&&o.m(I,null),b=!0,N||(k=[Z(t,"mouseenter",i[5]),Z(t,"mouseleave",i[6])],N=!0)},p(r,[_]){const S={};_&16&&(S.value=r[4]),g.$set(S),(!b||_&8&&!G(f.src,C="/tarot/"+r[3].image+".jpg"))&&T(f,"src",C),(!b||_&2)&&H(f,"reverse",r[1]),(!b||_&1)&&H(c,"active",r[0]),r[0]?o?(o.p(r,_),_&1&&F(o,1)):(o=x(r),o.c(),F(o,1),o.m(I,null)):o&&(ve(),W(o,1,1,()=>{o=null}),ue())},i(r){b||(F(g.$$.fragment,r),F(o),b=!0)},o(r){W(g.$$.fragment,r),W(o),b=!1},d(r){r&&(m(p),m(t),m(a),m(I)),m(n),de(g),o&&o.d(),N=!1,re(k)}}}const ge=1e3,ee=2e4,z=1500;function he(i,n,u){let w,p,t;ae(i,me,s=>u(14,t=s));const D=2*z;let g,h=0,c=!1,d=!1,f=!1,C=!1,v=[],l="hello-world",e=$[0],a=0,I=0;ie(async()=>{g=t.url.searchParams.get("username");let s=t.url.searchParams.get("cardDelaySeconds");s!=null&&u(7,h=parseInt(s)),S()});const b=s=>{if(s){let O=s*ge;return O>D?O:ee}return ee},N=()=>{u(0,c=!0)},k=()=>{u(0,c=!1)},o=s=>{const O=Math.floor(Math.random()*s.length);return s[O]},r=()=>{let s=Math.random()*100;console.log("Reverse Chance:",s),u(1,d=s<25),u(3,e=o($))},_=()=>{u(8,a=Date.now()),C||(u(9,I=a+p),C=!0,console.log("Inititalize time"));let s=I-a;if(c&&s>p-z?(k(),console.log("Hide card")):!f&&s>z&&s<=p-z?(u(2,l=v[0]),r(),f=!0,console.log("Initialize card")):!c&&s>z&&s<=p-z&&(N(),console.log("Show card")),s<=0){v.shift(),f=!1,C=!1,v.length>0?(console.log("Next in queue"),setTimeout(_,100)):(console.log("All out of cards, STOOOOOP"),k());return}setTimeout(_,100)},S=()=>{const s=new window.tmi.Client({channels:[g]});s.connect(),s.on("message",(O,Y,R,Ie)=>{let B=Y["display-name"];B!==void 0&&(console.log(`${B}: ${R}`),R=="!tarot"&&(v.length==0?(v.push(B),_()):v.push(B)))})};return i.$$.update=()=>{i.$$.dirty&128&&u(10,p=b(h)),i.$$.dirty&1792&&u(4,w=100-(I-a)/p*100|0)},[c,d,l,e,w,N,k,h,a,I,p]}class Ee extends ne{constructor(n){super(),le(this,n,he,pe,te,{})}}export{Ee as component};
