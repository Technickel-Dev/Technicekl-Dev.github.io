import{s as Ce,e as g,c as w,b as x,x as J,f as r,q as C,i as M,h as p,n as ie,J as be,K as ce,a as k,t as F,C as ye,g as q,d as O,O as xe,E as he,j as le,r as Pe,k as De}from"../chunks/scheduler.CHusSsjn.js";import{S as Ee,i as Ie,c as de,b as pe,m as fe,a as me,t as _e,d as ge}from"../chunks/index.D6p7BjwM.js";import{p as Se}from"../chunks/stores.CphA5Xfa.js";import{r as we,w as Ae,s as Ne}from"../chunks/utils.Ct5WaiD3.js";import{C as Ve}from"../chunks/circularProgress.C_IHts9G.js";function ke(v){let l,t,s='<div class="cell dollar svelte-lechau">100</div> <div class="cell green svelte-lechau">5</div> <div class="cell svelte-lechau">90</div> <div class="cell svelte-lechau">25</div> <div class="cell svelte-lechau">70</div> <div class="cell svelte-lechau">45</div> <div class="cell svelte-lechau">10</div> <div class="cell svelte-lechau">65</div> <div class="cell svelte-lechau">30</div> <div class="cell svelte-lechau">85</div> <div class="cell svelte-lechau">50</div> <div class="cell svelte-lechau">95</div> <div class="cell svelte-lechau">55</div> <div class="cell svelte-lechau">75</div> <div class="cell svelte-lechau">40</div> <div class="cell svelte-lechau">20</div> <div class="cell svelte-lechau">60</div> <div class="cell svelte-lechau">35</div> <div class="cell svelte-lechau">80</div> <div class="cell green svelte-lechau">15</div>';return{c(){l=g("div"),t=g("div"),t.innerHTML=s,this.h()},l(_){l=w(_,"DIV",{class:!0});var i=x(l);t=w(i,"DIV",{class:!0,"data-svelte-h":!0}),J(t)!=="svelte-18g45xq"&&(t.innerHTML=s),i.forEach(r),this.h()},h(){C(t,"class","wheel svelte-lechau"),C(l,"class","container svelte-lechau")},m(_,i){M(_,l,i),p(l,t),v[2](t)},p:ie,i:ie,o:ie,d(_){_&&r(l),v[2](null)}}}const qe=4e3,He=5;function Le(v,l,t){let s;be(()=>{_()});const _=()=>{let a=s.querySelectorAll("div"),c=360/a.length,u=Math.round(a[0].offsetHeight/2/Math.tan(Math.PI/a.length));a.forEach((n,f)=>{let E=c*f;n.style.transform=`rotateX(${E}deg) translateZ(${u}px)`}),t(0,s.style.transform=`translateZ(${-u}px) rotateX(0deg)`,s)},i=()=>{let a=s.querySelectorAll("div"),c=360/a.length,u=Math.round(a[0].offsetHeight/2/Math.tan(Math.PI/a.length)),n=we(0,a.length-1);return new Promise(async(f,E)=>{t(0,s.style.transition=`all ${qe}ms cubic-bezier(.34,-0.21,.51,1.02)`,s);let T=we(-c/2+1,c/2-1),m=He*360+n*c+T;t(0,s.style.transform=`translateZ(${-u}px) rotateX(${-m}deg)`,s),await Ae(s),t(0,s.style.transition="none",s),m=m%360,t(0,s.style.transform=`translateZ(${-u}px) rotateX(${-m}deg)`,s),f(n)})};function d(a){ce[a?"unshift":"push"](()=>{s=a,t(0,s)})}return[s,i,d]}class Ue extends Ee{constructor(l){super(),Ie(this,l,Le,ke,Ce,{spin:1})}get spin(){return this.$$.ctx[1]}}function Re(v){let l,t="",s,_,i,d,a,c,u,n,f,E="Top",T,m,H=(v[4]||P)+"",D,L,U=(v[5]||0)+"",B,X,I,o,y,W,b,S,A="Current",ne,R,j=(v[2]||P)+"",K,ae,z=(v[3]||0)+"",G,Q,N,oe='<p class="svelte-1swun8e">Type !wheel to spin the wheel</p> <p class="svelte-1swun8e">Type !spinagain to spin again after first</p> <p class="svelte-1swun8e">Ties top make both people go again!</p>',V,re,ue,Me={};d=new Ue({props:Me}),v[7](d);let Te={value:Be};return y=new Ve({props:Te}),v[10](y),{c(){l=g("script"),l.innerHTML=t,_=k(),i=g("div"),de(d.$$.fragment),a=k(),c=g("div"),u=k(),n=g("div"),f=g("p"),f.textContent=E,T=k(),m=g("p"),D=F(H),L=F(" - "),B=F(U),X=k(),I=g("div"),o=g("div"),de(y.$$.fragment),W=k(),b=g("div"),S=g("p"),S.textContent=A,ne=k(),R=g("p"),K=F(j),ae=F(" - "),G=F(z),Q=k(),N=g("div"),N.innerHTML=oe,this.h()},l(e){const h=ye("svelte-1nbh741",document.head);l=w(h,"SCRIPT",{src:!0,"data-svelte-h":!0}),J(l)!=="svelte-i7ndq0"&&(l.innerHTML=t),h.forEach(r),_=q(e),i=w(e,"DIV",{class:!0,role:!0,tabindex:!0});var Y=x(i);pe(d.$$.fragment,Y),Y.forEach(r),a=q(e),c=w(e,"DIV",{class:!0}),x(c).forEach(r),u=q(e),n=w(e,"DIV",{class:!0});var Z=x(n);f=w(Z,"P",{class:!0,"data-svelte-h":!0}),J(f)!=="svelte-5heo4a"&&(f.textContent=E),T=q(Z),m=w(Z,"P",{});var $=x(m);D=O($,H),L=O($," - "),B=O($,U),$.forEach(r),Z.forEach(r),X=q(e),I=w(e,"DIV",{class:!0});var ee=x(I);o=w(ee,"DIV",{class:!0});var ve=x(o);pe(y.$$.fragment,ve),ve.forEach(r),W=q(ee),b=w(ee,"DIV",{class:!0});var te=x(b);S=w(te,"P",{class:!0,"data-svelte-h":!0}),J(S)!=="svelte-1m47tik"&&(S.textContent=A),ne=q(te),R=w(te,"P",{});var se=x(R);K=O(se,j),ae=O(se," - "),G=O(se,z),se.forEach(r),te.forEach(r),ee.forEach(r),Q=q(e),N=w(e,"DIV",{class:!0,"data-svelte-h":!0}),J(N)!=="svelte-s4x46p"&&(N.innerHTML=oe),this.h()},h(){xe(l.src,s="/tarot/tmi.min.js")||C(l,"src",s),C(i,"class","container svelte-1swun8e"),C(i,"role","button"),C(i,"tabindex","0"),C(c,"class","arrow svelte-1swun8e"),C(f,"class","underline svelte-1swun8e"),C(n,"class","screen top svelte-1swun8e"),C(o,"class","progress-container svelte-1swun8e"),C(S,"class","underline svelte-1swun8e"),C(b,"class","current-text"),C(I,"class","screen current svelte-1swun8e"),C(N,"class","instructions svelte-1swun8e")},m(e,h){p(document.head,l),M(e,_,h),M(e,i,h),fe(d,i,null),M(e,a,h),M(e,c,h),M(e,u,h),M(e,n,h),p(n,f),p(n,T),p(n,m),p(m,D),p(m,L),p(m,B),M(e,X,h),M(e,I,h),p(I,o),fe(y,o,null),p(I,W),p(I,b),p(b,S),p(b,ne),p(b,R),p(R,K),p(R,ae),p(R,G),M(e,Q,h),M(e,N,h),V=!0,re||(ue=[he(i,"click",v[8]),he(i,"keypress",v[9])],re=!0)},p(e,[h]){const Y={};d.$set(Y),(!V||h&16)&&H!==(H=(e[4]||P)+"")&&le(D,H),(!V||h&32)&&U!==(U=(e[5]||0)+"")&&le(B,U);const Z={};y.$set(Z),(!V||h&4)&&j!==(j=(e[2]||P)+"")&&le(K,j),(!V||h&8)&&z!==(z=(e[3]||0)+"")&&le(G,z)},i(e){V||(me(d.$$.fragment,e),me(y.$$.fragment,e),V=!0)},o(e){_e(d.$$.fragment,e),_e(y.$$.fragment,e),V=!1},d(e){e&&(r(_),r(i),r(a),r(c),r(u),r(n),r(X),r(I),r(Q),r(N)),r(l),v[7](null),ge(d),v[10](null),ge(y),re=!1,Pe(ue)}}}const P="None";var Be=0;function Xe(v,l,t){let s;De(v,Se,o=>t(14,s=o));const _=[100,5,90,25,70,45,10,65,30,85,50,95,55,75,40,20,60,35,80,15];let i,d,a,c=[],u=P,n=0,f=P,E=0,T=!1,m=0;be(async()=>{i=s.url.searchParams.get("username"),H()});const H=()=>{const o=new window.tmi.Client({channels:[i]});o.connect(),o.on("message",(y,W,b,S)=>{let A=W["display-name"];A!==void 0&&(console.log(`${A}: ${b}`),b=="!wheel"&&(c.length==0?(c.push(A),L()):c.push(A)),b=="!spinagain"&&A==u&&(T=!0))})},D=()=>{m>0?(T=!0,m=0):(m=1,L())},L=async()=>{t(2,u=c[0]),u==null&&t(2,u=P);let o=await d.spin();t(3,n=_[o]),a.timedProgress(15e3),await Ne(15e3),T==!0&&(o=await d.spin(),t(3,n+=_[o])),n>E&&n<=100?(t(4,f=u),t(5,E=n)):n==E&&(c.unshift(u),c.unshift(f),t(4,f=P),t(5,E=0)),c.shift(),t(3,n=0),t(2,u=P),T=!1,c.length>0&&L()};function U(o){ce[o?"unshift":"push"](()=>{d=o,t(0,d)})}const B=()=>D(),X=()=>D();function I(o){ce[o?"unshift":"push"](()=>{a=o,t(1,a)})}return[d,a,u,n,f,E,D,U,B,X,I]}class ze extends Ee{constructor(l){super(),Ie(this,l,Xe,Re,Ce,{})}}export{ze as component};
