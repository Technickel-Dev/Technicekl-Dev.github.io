import{s as ee,e as x,c as I,b as P,m as q,f as T,o as y,i as K,h as d,n as R,D as te,F as C,a as E,t as ie,l as oe,g as w,d as ce,z as de,H as W,j as ve,J as ue,k as fe}from"../chunks/scheduler.48785eb3.js";import{S as se,i as ne,c as U,a as k,m as z,t as F,b as Z,d as B}from"../chunks/index.214faea7.js";import{p as me}from"../chunks/stores.9248e368.js";import{r as he}from"../chunks/utils.a5495163.js";function pe(r){let l,s,f='<div class="emogi svelte-6xd3vs">👾</div> <div class="emogi svelte-6xd3vs">💎</div> <div class="emogi svelte-6xd3vs">💰</div> <div class="emogi svelte-6xd3vs">🍒</div> <div class="emogi svelte-6xd3vs">🍊</div> <div class="emogi svelte-6xd3vs">🍋</div> <div class="emogi svelte-6xd3vs">🍉</div> <div class="emogi svelte-6xd3vs">🍌</div> <div class="emogi svelte-6xd3vs">🍆</div>';return{c(){l=x("div"),s=x("div"),s.innerHTML=f,this.h()},l(o){l=I(o,"DIV",{class:!0});var e=P(l);s=I(e,"DIV",{class:!0,"data-svelte-h":!0}),q(s)!=="svelte-1iz3z07"&&(s.innerHTML=f),e.forEach(T),this.h()},h(){y(s,"class","reel svelte-6xd3vs"),y(l,"class","container svelte-6xd3vs")},m(o,e){K(o,l,e),d(l,s),r[3](s)},p:R,i:R,o:R,d(o){o&&T(l),r[3](null)}}}function _e(r,l,s){let{spinOffset:f=0}=l,o=4e3+f*1e3,e;te(()=>{m()});const m=()=>{let n=e.querySelectorAll("div"),a=360/n.length,c=Math.round(n[0].offsetHeight/2/Math.tan(Math.PI/n.length));n.forEach((_,v)=>{let j=a*v;_.style.transform=`rotateX(${j}deg) translateZ(${c}px)`})},h=()=>{let n=e.querySelectorAll("div"),a=360/n.length,c=Math.round(n[0].offsetHeight/2/Math.tan(Math.PI/n.length)),_=he(0,n.length-1),j=5+f;return new Promise((p,L)=>{s(0,e.style.transition=`all ${o}ms cubic-bezier(.41,-0.01,.63,1.09)`,e);let t=j*360+_*a;s(0,e.style.transform=`translateZ(${-c}px) rotateX(${-t}deg)`,e),setTimeout(()=>{s(0,e.style.transition="none",e),t=t%360,s(0,e.style.transform=`translateZ(${-c}px) rotateX(${-t}deg)`,e),p(_)},o)})};function b(n){C[n?"unshift":"push"](()=>{e=n,s(0,e)})}return r.$$set=n=>{"spinOffset"in n&&s(1,f=n.spinOffset)},[e,f,h,b]}class J extends se{constructor(l){super(),ne(this,l,_e,pe,ee,{spinOffset:1,roll:2})}get roll(){return this.$$.ctx[2]}}function ge(r){let l,s="",f,o,e,m,h,b,n,a,c,_,v,j,p,L,t,H,u,S='<div class="arm svelte-10jypn0"></div> <div class="ball svelte-10jypn0"></div>',O,M,G='<div class="instructions svelte-10jypn0">Type !slots to spin the wheel</div>',V,X,Q,le={};c=new J({props:le}),r[6](c);let re={spinOffset:1};v=new J({props:re}),r[7](v);let ae={spinOffset:2};return p=new J({props:ae}),r[8](p),{c(){l=x("script"),l.innerHTML=s,o=E(),e=x("div"),m=x("div"),h=x("div"),b=ie(r[4]),n=E(),a=x("div"),U(c.$$.fragment),_=E(),U(v.$$.fragment),j=E(),U(p.$$.fragment),L=E(),t=x("div"),H=E(),u=x("div"),u.innerHTML=S,O=E(),M=x("div"),M.innerHTML=G,this.h()},l(i){const D=oe("svelte-1nbh741",document.head);l=I(D,"SCRIPT",{src:!0,"data-svelte-h":!0}),q(l)!=="svelte-i7ndq0"&&(l.innerHTML=s),D.forEach(T),o=w(i),e=I(i,"DIV",{class:!0});var g=P(e);m=I(g,"DIV",{class:!0});var A=P(m);h=I(A,"DIV",{class:!0});var N=P(h);b=ce(N,r[4]),N.forEach(T),A.forEach(T),n=w(g),a=I(g,"DIV",{class:!0});var $=P(a);k(c.$$.fragment,$),_=w($),k(v.$$.fragment,$),j=w($),k(p.$$.fragment,$),$.forEach(T),L=w(g),t=I(g,"DIV",{class:!0}),P(t).forEach(T),H=w(g),u=I(g,"DIV",{class:!0,role:!0,tabindex:!0,"data-svelte-h":!0}),q(u)!=="svelte-1chcmit"&&(u.innerHTML=S),O=w(g),M=I(g,"DIV",{class:!0,"data-svelte-h":!0}),q(M)!=="svelte-1ugn8wi"&&(M.innerHTML=G),g.forEach(T),this.h()},h(){de(l.src,f="/tarot/tmi.min.js")||y(l,"src",f),y(h,"class","name svelte-10jypn0"),y(m,"class","semi-circle svelte-10jypn0"),y(a,"class","slots svelte-10jypn0"),y(t,"class","mount svelte-10jypn0"),y(u,"class","lever svelte-10jypn0"),y(u,"role","button"),y(u,"tabindex","0"),y(M,"class","console svelte-10jypn0"),y(e,"class","container svelte-10jypn0")},m(i,D){d(document.head,l),K(i,o,D),K(i,e,D),d(e,m),d(m,h),d(h,b),d(e,n),d(e,a),z(c,a,null),d(a,_),z(v,a,null),d(a,j),z(p,a,null),d(e,L),d(e,t),d(e,H),d(e,u),r[9](u),d(e,O),d(e,M),V=!0,X||(Q=[W(u,"click",r[5]),W(u,"keypress",r[5])],X=!0)},p(i,[D]){(!V||D&16)&&ve(b,i[4]);const g={};c.$set(g);const A={};v.$set(A);const N={};p.$set(N)},i(i){V||(F(c.$$.fragment,i),F(v.$$.fragment,i),F(p.$$.fragment,i),V=!0)},o(i){Z(c.$$.fragment,i),Z(v.$$.fragment,i),Z(p.$$.fragment,i),V=!1},d(i){i&&(T(o),T(e)),T(l),r[6](null),B(c),r[7](null),B(v),r[8](null),B(p),r[9](null),X=!1,ue(Q)}}}const Y="hello-world";function ye(r,l,s){let f;fe(r,me,t=>s(11,f=t));let o,e,m,h,b,n=[],a=Y;te(async()=>{o=f.url.searchParams.get("username"),c()});const c=()=>{const t=new window.tmi.Client({channels:[o]});t.connect(),t.on("message",(H,u,S,O)=>{let M=u["display-name"];console.log(`${M}: ${S}`),S=="!slots"&&(n.length==0?(n.push(M),_()):n.push(M))})},_=async()=>{const t=[{transform:"rotateX(0)"},{transform:"rotateX(180deg)"},{transform:"rotateX(0)"}],H={duration:2e3,easing:"ease-out"};b.animate(t,H),s(4,a=n[0]),a==null&&s(4,a=Y),await Promise.all([e.roll(),m.roll(),h.roll()]),n.shift(),n.length>0&&_()};function v(t){C[t?"unshift":"push"](()=>{e=t,s(0,e)})}function j(t){C[t?"unshift":"push"](()=>{m=t,s(1,m)})}function p(t){C[t?"unshift":"push"](()=>{h=t,s(2,h)})}function L(t){C[t?"unshift":"push"](()=>{b=t,s(3,b)})}return[e,m,h,b,a,_,v,j,p,L]}class Ie extends se{constructor(l){super(),ne(this,l,ye,ge,ee,{})}}export{Ie as component};
