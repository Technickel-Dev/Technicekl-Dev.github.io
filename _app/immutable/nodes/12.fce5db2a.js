import{s as ee,e as I,c as x,b as P,o as q,f as T,p as y,i as G,h as d,n as R,E as te,G as A,a as w,t as ie,m as oe,g as D,d as ce,A as de,I as W,j as ve,K as ue,k as fe}from"../chunks/scheduler.53225da0.js";import{S as se,i as ne,c as U,a as k,m as z,t as F,b as Z,d as B}from"../chunks/index.2806aff3.js";import{p as me}from"../chunks/stores.52007614.js";import{r as he}from"../chunks/utils.a5495163.js";function pe(r){let l,s,f='<div class="emogi svelte-6xd3vs">👾</div> <div class="emogi svelte-6xd3vs">💎</div> <div class="emogi svelte-6xd3vs">💰</div> <div class="emogi svelte-6xd3vs">🍒</div> <div class="emogi svelte-6xd3vs">🍊</div> <div class="emogi svelte-6xd3vs">🍋</div> <div class="emogi svelte-6xd3vs">🍉</div> <div class="emogi svelte-6xd3vs">🍌</div> <div class="emogi svelte-6xd3vs">🍆</div>';return{c(){l=I("div"),s=I("div"),s.innerHTML=f,this.h()},l(o){l=x(o,"DIV",{class:!0});var e=P(l);s=x(e,"DIV",{class:!0,"data-svelte-h":!0}),q(s)!=="svelte-1iz3z07"&&(s.innerHTML=f),e.forEach(T),this.h()},h(){y(s,"class","reel svelte-6xd3vs"),y(l,"class","container svelte-6xd3vs")},m(o,e){G(o,l,e),d(l,s),r[3](s)},p:R,i:R,o:R,d(o){o&&T(l),r[3](null)}}}function _e(r,l,s){let{spinOffset:f=0}=l,o=4e3+f*1e3,e;te(()=>{m()});const m=()=>{let n=e.querySelectorAll("div"),a=360/n.length,c=Math.round(n[0].offsetHeight/2/Math.tan(Math.PI/n.length));n.forEach((_,v)=>{let E=a*v;_.style.transform=`rotateX(${E}deg) translateZ(${c}px)`})},h=()=>{let n=e.querySelectorAll("div"),a=360/n.length,c=Math.round(n[0].offsetHeight/2/Math.tan(Math.PI/n.length)),_=he(0,n.length-1),E=5+f;return new Promise((p,L)=>{s(0,e.style.transition=`all ${o}ms cubic-bezier(.41,-0.01,.63,1.09)`,e);let t=E*360+_*a;s(0,e.style.transform=`translateZ(${-c}px) rotateX(${-t}deg)`,e),setTimeout(()=>{s(0,e.style.transition="none",e),t=t%360,s(0,e.style.transform=`translateZ(${-c}px) rotateX(${-t}deg)`,e),p(_)},o)})};function b(n){A[n?"unshift":"push"](()=>{e=n,s(0,e)})}return r.$$set=n=>{"spinOffset"in n&&s(1,f=n.spinOffset)},[e,f,h,b]}class K extends se{constructor(l){super(),ne(this,l,_e,pe,ee,{spinOffset:1,roll:2})}get roll(){return this.$$.ctx[2]}}function ge(r){let l,s="",f,o,e,m,h,b,n,a,c,_,v,E,p,L,t,$,u,S='<div class="arm svelte-10jypn0"></div> <div class="ball svelte-10jypn0"></div>',C,M,J='<div class="instructions svelte-10jypn0">Type !slots to spin the wheel</div>',V,X,Q,le={};c=new K({props:le}),r[6](c);let re={spinOffset:1};v=new K({props:re}),r[7](v);let ae={spinOffset:2};return p=new K({props:ae}),r[8](p),{c(){l=I("script"),l.innerHTML=s,o=w(),e=I("div"),m=I("div"),h=I("div"),b=ie(r[4]),n=w(),a=I("div"),U(c.$$.fragment),_=w(),U(v.$$.fragment),E=w(),U(p.$$.fragment),L=w(),t=I("div"),$=w(),u=I("div"),u.innerHTML=S,C=w(),M=I("div"),M.innerHTML=J,this.h()},l(i){const j=oe("svelte-1nbh741",document.head);l=x(j,"SCRIPT",{src:!0,"data-svelte-h":!0}),q(l)!=="svelte-i7ndq0"&&(l.innerHTML=s),j.forEach(T),o=D(i),e=x(i,"DIV",{class:!0});var g=P(e);m=x(g,"DIV",{class:!0});var O=P(m);h=x(O,"DIV",{class:!0});var N=P(h);b=ce(N,r[4]),N.forEach(T),O.forEach(T),n=D(g),a=x(g,"DIV",{class:!0});var H=P(a);k(c.$$.fragment,H),_=D(H),k(v.$$.fragment,H),E=D(H),k(p.$$.fragment,H),H.forEach(T),L=D(g),t=x(g,"DIV",{class:!0}),P(t).forEach(T),$=D(g),u=x(g,"DIV",{class:!0,role:!0,tabindex:!0,"data-svelte-h":!0}),q(u)!=="svelte-1chcmit"&&(u.innerHTML=S),C=D(g),M=x(g,"DIV",{class:!0,"data-svelte-h":!0}),q(M)!=="svelte-1ugn8wi"&&(M.innerHTML=J),g.forEach(T),this.h()},h(){de(l.src,f="/tarot/tmi.min.js")||y(l,"src",f),y(h,"class","name svelte-10jypn0"),y(m,"class","semi-circle svelte-10jypn0"),y(a,"class","slots svelte-10jypn0"),y(t,"class","mount svelte-10jypn0"),y(u,"class","lever svelte-10jypn0"),y(u,"role","button"),y(u,"tabindex","0"),y(M,"class","console svelte-10jypn0"),y(e,"class","container svelte-10jypn0")},m(i,j){d(document.head,l),G(i,o,j),G(i,e,j),d(e,m),d(m,h),d(h,b),d(e,n),d(e,a),z(c,a,null),d(a,_),z(v,a,null),d(a,E),z(p,a,null),d(e,L),d(e,t),d(e,$),d(e,u),r[9](u),d(e,C),d(e,M),V=!0,X||(Q=[W(u,"click",r[5]),W(u,"keypress",r[5])],X=!0)},p(i,[j]){(!V||j&16)&&ve(b,i[4]);const g={};c.$set(g);const O={};v.$set(O);const N={};p.$set(N)},i(i){V||(F(c.$$.fragment,i),F(v.$$.fragment,i),F(p.$$.fragment,i),V=!0)},o(i){Z(c.$$.fragment,i),Z(v.$$.fragment,i),Z(p.$$.fragment,i),V=!1},d(i){i&&(T(o),T(e)),T(l),r[6](null),B(c),r[7](null),B(v),r[8](null),B(p),r[9](null),X=!1,ue(Q)}}}const Y="hello-world";function ye(r,l,s){let f;fe(r,me,t=>s(11,f=t));let o,e,m,h,b,n=[],a=Y;te(async()=>{o=f.url.searchParams.get("username"),c()});const c=()=>{const t=new window.tmi.Client({channels:[o]});t.connect(),t.on("message",($,u,S,C)=>{let M=u["display-name"];console.log(`${M}: ${S}`),S=="!slots"&&(n.length==0?(n.push(M),_()):n.push(M))})},_=async()=>{const t=[{transform:"rotateX(0)"},{transform:"rotateX(180deg)"},{transform:"rotateX(0)"}],$={duration:2e3,easing:"ease-out"};b.animate(t,$),s(4,a=n[0]),a==null&&s(4,a=Y),await Promise.all([e.roll(),m.roll(),h.roll()]),n.shift(),n.length>0&&_()};function v(t){A[t?"unshift":"push"](()=>{e=t,s(0,e)})}function E(t){A[t?"unshift":"push"](()=>{m=t,s(1,m)})}function p(t){A[t?"unshift":"push"](()=>{h=t,s(2,h)})}function L(t){A[t?"unshift":"push"](()=>{b=t,s(3,b)})}return[e,m,h,b,a,_,v,E,p,L]}class xe extends se{constructor(l){super(),ne(this,l,ye,ge,ee,{})}}export{xe as component};
