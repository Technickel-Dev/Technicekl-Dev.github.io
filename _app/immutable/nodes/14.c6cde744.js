import{s as te,e as E,a as j,z as se,c as L,r as X,f as m,g as q,b as V,L as G,o as T,K as H,h as M,i as A,B as Z,N as re,k as ae,F as ne,t as K,d as U,j as J,O as Q}from"../chunks/scheduler.e43ee5f3.js";import{S as ie,i as le,c as oe,b as ce,m as fe,t as F,a as W,e as ue,d as de,j as k,g as ve}from"../chunks/index.9c613d38.js";import{p as me}from"../chunks/stores.b7bff447.js";import{C as _e}from"../chunks/circularProgress.3191d550.js";import{f as z}from"../chunks/index.ac0fb3cf.js";const $=[{name:"Ace of cups",image:"ace_of_cups",description:"Represents new emotional beginnings, love, and creative inspiration. It symbolizes fresh emotions, deep connections, and a positive outlook on relationships.",reverseDescription:"In reverse, indicates obstacles in establishing meaningful emotional connections, creative hindrances, and unresolved inner conflicts. There may be a need for emotional healing and self-reflection."}];function x(n){let i,u,w,p,t,D=n[3].name+"",g,h,c,d,f=(n[1]?n[3].reverseDescription:n[3].description)+"",C,v,l;return{c(){i=E("div"),u=K(n[2]),p=j(),t=E("div"),g=K(D),c=j(),d=E("div"),C=K(f),this.h()},l(e){i=L(e,"DIV",{class:!0});var a=V(i);u=U(a,n[2]),a.forEach(m),p=q(e),t=L(e,"DIV",{class:!0});var I=V(t);g=U(I,D),I.forEach(m),c=q(e),d=L(e,"DIV",{class:!0});var b=V(d);C=U(b,f),b.forEach(m),this.h()},h(){T(i,"class","name svelte-1i7vgrw"),T(t,"class","card-name svelte-1i7vgrw"),H(t,"reverse",n[1]),T(d,"class","card-description svelte-1i7vgrw")},m(e,a){A(e,i,a),M(i,u),A(e,p,a),A(e,t,a),M(t,g),A(e,c,a),A(e,d,a),M(d,C),l=!0},p(e,a){(!l||a&4)&&J(u,e[2]),(!l||a&8)&&D!==(D=e[3].name+"")&&J(g,D),(!l||a&2)&&H(t,"reverse",e[1]),(!l||a&10)&&f!==(f=(e[1]?e[3].reverseDescription:e[3].description)+"")&&J(C,f)},i(e){l||(e&&Q(()=>{l&&(w||(w=k(i,z,{},!0)),w.run(1))}),e&&Q(()=>{l&&(h||(h=k(t,z,{},!0)),h.run(1))}),e&&Q(()=>{l&&(v||(v=k(d,z,{},!0)),v.run(1))}),l=!0)},o(e){e&&(w||(w=k(i,z,{},!1)),w.run(0)),e&&(h||(h=k(t,z,{},!1)),h.run(0)),e&&(v||(v=k(d,z,{},!1)),v.run(0)),l=!1},d(e){e&&(m(i),m(p),m(t),m(c),m(d)),e&&w&&w.end(),e&&h&&h.end(),e&&v&&v.end()}}}function pe(n){let i,u="",w,p,t,D,g,h,c,d,f,C,v,l,e='<p class="back-text svelte-1i7vgrw">Type !tarot to get a reading</p>',a,I,b,y,N;g=new _e({props:{value:n[4]}});let o=n[0]&&x(n);return{c(){i=E("script"),i.innerHTML=u,p=j(),t=E("div"),D=E("div"),oe(g.$$.fragment),h=j(),c=E("div"),d=E("div"),f=E("img"),v=j(),l=E("div"),l.innerHTML=e,a=j(),I=E("div"),o&&o.c(),this.h()},l(r){const _=se("svelte-1nbh741",document.head);i=L(_,"SCRIPT",{src:!0,"data-svelte-h":!0}),X(i)!=="svelte-i7ndq0"&&(i.innerHTML=u),_.forEach(m),p=q(r),t=L(r,"DIV",{class:!0,role:!0});var S=V(t);D=L(S,"DIV",{class:!0});var s=V(D);ce(g.$$.fragment,s),s.forEach(m),h=q(S),c=L(S,"DIV",{class:!0});var O=V(c);d=L(O,"DIV",{class:!0});var Y=V(d);f=L(Y,"IMG",{src:!0,alt:!0,class:!0}),Y.forEach(m),v=q(O),l=L(O,"DIV",{class:!0,"data-svelte-h":!0}),X(l)!=="svelte-7l81gw"&&(l.innerHTML=e),O.forEach(m),S.forEach(m),a=q(r),I=L(r,"DIV",{class:!0});var R=V(I);o&&o.l(R),R.forEach(m),this.h()},h(){G(i.src,w="/tarot/tmi.min.js")||T(i,"src",w),T(D,"class","progress-container svelte-1i7vgrw"),G(f.src,C="/tarot/"+n[3].image+".jpg")||T(f,"src",C),T(f,"alt","Tarot Card"),T(f,"class","svelte-1i7vgrw"),H(f,"reverse",n[1]),T(d,"class","front svelte-1i7vgrw"),T(l,"class","back svelte-1i7vgrw"),T(c,"class","card svelte-1i7vgrw"),H(c,"active",n[0]),T(t,"class","container svelte-1i7vgrw"),T(t,"role","main"),T(I,"class","text-container svelte-1i7vgrw")},m(r,_){M(document.head,i),A(r,p,_),A(r,t,_),M(t,D),fe(g,D,null),M(t,h),M(t,c),M(c,d),M(d,f),M(c,v),M(c,l),A(r,a,_),A(r,I,_),o&&o.m(I,null),b=!0,y||(N=[Z(t,"mouseenter",n[5]),Z(t,"mouseleave",n[6])],y=!0)},p(r,[_]){const S={};_&16&&(S.value=r[4]),g.$set(S),(!b||_&8&&!G(f.src,C="/tarot/"+r[3].image+".jpg"))&&T(f,"src",C),(!b||_&2)&&H(f,"reverse",r[1]),(!b||_&1)&&H(c,"active",r[0]),r[0]?o?(o.p(r,_),_&1&&F(o,1)):(o=x(r),o.c(),F(o,1),o.m(I,null)):o&&(ve(),W(o,1,1,()=>{o=null}),ue())},i(r){b||(F(g.$$.fragment,r),F(o),b=!0)},o(r){W(g.$$.fragment,r),W(o),b=!1},d(r){r&&(m(p),m(t),m(a),m(I)),m(i),de(g),o&&o.d(),y=!1,re(N)}}}const ge=1e3,ee=2e4,P=1500;function he(n,i,u){let w,p,t;ae(n,me,s=>u(14,t=s));const D=2*P;let g,h=0,c=!1,d=!1,f=!1,C=!1,v=[],l="hello-world",e=$[0],a=0,I=0;ne(async()=>{g=t.url.searchParams.get("username");let s=t.url.searchParams.get("cardDelaySeconds");s!=null&&u(7,h=parseInt(s)),S()});const b=s=>{if(s){let O=s*ge;return O>D?O:ee}return ee},y=()=>{u(0,c=!0)},N=()=>{u(0,c=!1)},o=s=>{const O=Math.floor(Math.random()*s.length);return s[O]},r=()=>{let s=Math.random()*100;console.log("Reverse Chance:",s),u(1,d=s<25),u(3,e=o($))},_=()=>{u(8,a=Date.now()),C||(u(9,I=a+p),C=!0,console.log("Inititalize time"));let s=I-a;if(c&&s>p-P?(N(),console.log("Hide card")):!f&&s>P&&s<=p-P?(u(2,l=v[0]),r(),f=!0,console.log("Initialize card")):!c&&s>P&&s<=p-P&&(y(),console.log("Show card")),s<=0){v.shift(),f=!1,C=!1,v.length>0?(console.log("Next in queue"),setTimeout(_,100)):(console.log("All out of cards, STOOOOOP"),N());return}setTimeout(_,100)},S=()=>{const s=new window.tmi.Client({channels:[g]});s.connect(),s.on("message",(O,Y,R,Ie)=>{let B=Y["display-name"];B!==void 0&&(console.log(`${B}: ${R}`),R=="!tarot"&&(v.length==0?(v.push(B),_()):v.push(B)))})};return n.$$.update=()=>{n.$$.dirty&128&&u(10,p=b(h)),n.$$.dirty&1792&&u(4,w=100-(I-a)/p*100|0)},[c,d,l,e,w,y,N,h,a,I,p]}class Ee extends ie{constructor(i){super(),le(this,i,he,pe,te,{})}}export{Ee as component};
