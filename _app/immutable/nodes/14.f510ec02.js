import{s as te,e as E,a as P,m as se,c as M,o as X,f as m,g as j,b as V,K as G,p as T,I as q,h as L,i as O,F as Z,H as re,k as ae,B as ne,t as J,d as K,j as U,J as Q}from"../chunks/scheduler.82d237a4.js";import{S as ie,i as le,c as oe,a as ce,m as fe,t as B,b as W,e as ue,d as de,j as N,g as ve}from"../chunks/index.ed4bb7eb.js";import{p as me}from"../chunks/stores.9114531b.js";import{C as _e}from"../chunks/circularProgress.8e7b2b3a.js";import{f as z}from"../chunks/index.257567f8.js";const $=[{name:"Ace of cups",image:"ace_of_cups",description:"Represents new emotional beginnings, love, and creative inspiration. It symbolizes fresh emotions, deep connections, and a positive outlook on relationships.",reverse_description:"In reverse, indicates obstacles in establishing meaningful emotional connections, creative hindrances, and unresolved inner conflicts. There may be a need for emotional healing and self-reflection."}];function x(n){let i,u,w,p,t,D=n[3].name+"",g,h,c,d,f=(n[1]?n[3].reverse_description:n[3].description)+"",C,v,l;return{c(){i=E("div"),u=J(n[2]),p=P(),t=E("div"),g=J(D),c=P(),d=E("div"),C=J(f),this.h()},l(e){i=M(e,"DIV",{class:!0});var r=V(i);u=K(r,n[2]),r.forEach(m),p=j(e),t=M(e,"DIV",{class:!0});var I=V(t);g=K(I,D),I.forEach(m),c=j(e),d=M(e,"DIV",{class:!0});var b=V(d);C=K(b,f),b.forEach(m),this.h()},h(){T(i,"class","name svelte-1i7vgrw"),T(t,"class","card-name svelte-1i7vgrw"),q(t,"reverse",n[1]),T(d,"class","card-description svelte-1i7vgrw")},m(e,r){O(e,i,r),L(i,u),O(e,p,r),O(e,t,r),L(t,g),O(e,c,r),O(e,d,r),L(d,C),l=!0},p(e,r){(!l||r&4)&&U(u,e[2]),(!l||r&8)&&D!==(D=e[3].name+"")&&U(g,D),(!l||r&2)&&q(t,"reverse",e[1]),(!l||r&10)&&f!==(f=(e[1]?e[3].reverse_description:e[3].description)+"")&&U(C,f)},i(e){l||(e&&Q(()=>{l&&(w||(w=N(i,z,{},!0)),w.run(1))}),e&&Q(()=>{l&&(h||(h=N(t,z,{},!0)),h.run(1))}),e&&Q(()=>{l&&(v||(v=N(d,z,{},!0)),v.run(1))}),l=!0)},o(e){e&&(w||(w=N(i,z,{},!1)),w.run(0)),e&&(h||(h=N(t,z,{},!1)),h.run(0)),e&&(v||(v=N(d,z,{},!1)),v.run(0)),l=!1},d(e){e&&(m(i),m(p),m(t),m(c),m(d)),e&&w&&w.end(),e&&h&&h.end(),e&&v&&v.end()}}}function pe(n){let i,u="",w,p,t,D,g,h,c,d,f,C,v,l,e='<p class="back-text svelte-1i7vgrw">Type !tarot to get a reading</p>',r,I,b,k,y;g=new _e({props:{value:n[4]}});let o=n[0]&&x(n);return{c(){i=E("script"),i.innerHTML=u,p=P(),t=E("div"),D=E("div"),oe(g.$$.fragment),h=P(),c=E("div"),d=E("div"),f=E("img"),v=P(),l=E("div"),l.innerHTML=e,r=P(),I=E("div"),o&&o.c(),this.h()},l(s){const _=se("svelte-1nbh741",document.head);i=M(_,"SCRIPT",{src:!0,"data-svelte-h":!0}),X(i)!=="svelte-i7ndq0"&&(i.innerHTML=u),_.forEach(m),p=j(s),t=M(s,"DIV",{class:!0,role:!0});var A=V(t);D=M(A,"DIV",{class:!0});var a=V(D);ce(g.$$.fragment,a),a.forEach(m),h=j(A),c=M(A,"DIV",{class:!0});var S=V(c);d=M(S,"DIV",{class:!0});var Y=V(d);f=M(Y,"IMG",{src:!0,alt:!0,class:!0}),Y.forEach(m),v=j(S),l=M(S,"DIV",{class:!0,"data-svelte-h":!0}),X(l)!=="svelte-7l81gw"&&(l.innerHTML=e),S.forEach(m),A.forEach(m),r=j(s),I=M(s,"DIV",{class:!0});var R=V(I);o&&o.l(R),R.forEach(m),this.h()},h(){G(i.src,w="/tarot/tmi.min.js")||T(i,"src",w),T(D,"class","progress-container svelte-1i7vgrw"),G(f.src,C="/tarot/"+n[3].image+".jpg")||T(f,"src",C),T(f,"alt","Tarot Card"),T(f,"class","svelte-1i7vgrw"),q(f,"reverse",n[1]),T(d,"class","front svelte-1i7vgrw"),T(l,"class","back svelte-1i7vgrw"),T(c,"class","card svelte-1i7vgrw"),q(c,"active",n[0]),T(t,"class","container svelte-1i7vgrw"),T(t,"role","main"),T(I,"class","text-container svelte-1i7vgrw")},m(s,_){L(document.head,i),O(s,p,_),O(s,t,_),L(t,D),fe(g,D,null),L(t,h),L(t,c),L(c,d),L(d,f),L(c,v),L(c,l),O(s,r,_),O(s,I,_),o&&o.m(I,null),b=!0,k||(y=[Z(t,"mouseenter",n[5]),Z(t,"mouseleave",n[6])],k=!0)},p(s,[_]){const A={};_&16&&(A.value=s[4]),g.$set(A),(!b||_&8&&!G(f.src,C="/tarot/"+s[3].image+".jpg"))&&T(f,"src",C),(!b||_&2)&&q(f,"reverse",s[1]),(!b||_&1)&&q(c,"active",s[0]),s[0]?o?(o.p(s,_),_&1&&B(o,1)):(o=x(s),o.c(),B(o,1),o.m(I,null)):o&&(ve(),W(o,1,1,()=>{o=null}),ue())},i(s){b||(B(g.$$.fragment,s),B(o),b=!0)},o(s){W(g.$$.fragment,s),W(o),b=!1},d(s){s&&(m(p),m(t),m(r),m(I)),m(i),de(g),o&&o.d(),k=!1,re(y)}}}const ge=1e3,ee=2e4,H=1500;function he(n,i,u){let w,p,t;ae(n,me,a=>u(14,t=a));const D=2*H;let g,h=0,c=!1,d=!1,f=!1,C=!1,v=[],l="hello-world",e=$[0],r=0,I=0;ne(async()=>{g=t.url.searchParams.get("username"),u(7,h=parseInt(t.url.searchParams.get("cardDelaySeconds"))),A()});const b=a=>{if(a){let S=a*ge;return S>D?S:ee}return ee},k=()=>{u(0,c=!0)},y=()=>{u(0,c=!1)},o=a=>{const S=Math.floor(Math.random()*a.length);return a[S]},s=()=>{let a=Math.random()*100;console.log("Reverse Chance:",a),u(1,d=a<25),u(3,e=o($))},_=()=>{u(8,r=Date.now()),C||(u(9,I=r+p),C=!0,console.log("Inititalize time"));let a=I-r;if(c&&a>p-H?(y(),console.log("Hide card")):!f&&a>H&&a<=p-H?(u(2,l=v[0]),s(),f=!0,console.log("Initialize card")):!c&&a>H&&a<=p-H&&(k(),console.log("Show card")),a<=0){v.shift(),f=!1,C=!1,v.length>0?(console.log("Next in queue"),setTimeout(_,100)):(console.log("All out of cards, STOOOOOP"),y());return}setTimeout(_,100)},A=()=>{const a=new window.tmi.Client({channels:[g]});a.connect(),a.on("message",(S,Y,R,Ie)=>{let F=Y["display-name"];console.log(`${F}: ${R}`),R=="!tarot"&&(v.length==0?(v.push(F),_()):v.push(F))})};return n.$$.update=()=>{n.$$.dirty&128&&u(10,p=b(h)),n.$$.dirty&1792&&u(4,w=100-(I-r)/p*100|0)},[c,d,l,e,w,k,y,h,r,I,p]}class Ee extends ie{constructor(i){super(),le(this,i,he,pe,te,{})}}export{Ee as component};
