import{s as K,e as b,c as k,b as D,f as _,o as f,K as j,i as S,h as p,t as N,d as C,j as F,O as W,r as J,a as x,z as ne,g as $,L as le,B as z,N as ae,k as oe,F as re,I as ie}from"../chunks/scheduler.e43ee5f3.js";import{S as Q,i as X,g as ce,a as O,e as ue,t as G,f as Z,h as ee,c as de,b as _e,m as fe,d as he}from"../chunks/index.9c613d38.js";import{p as pe}from"../chunks/stores.4610d451.js";import{s as q,r as me}from"../chunks/utils.547bbd9e.js";import{f as L}from"../chunks/index.ac0fb3cf.js";function ve(i){let t,a,l,s,n;return{c(){t=b("div"),a=N(i[0]),this.h()},l(e){t=k(e,"DIV",{class:!0});var o=D(t);a=C(o,i[0]),o.forEach(_),this.h()},h(){f(t,"class","answer svelte-16owix8")},m(e,o){S(e,t,o),p(t,a),n=!0},p(e,o){i=e,(!n||o&1)&&F(a,i[0])},i(e){n||(e&&W(()=>{n&&(s&&s.end(1),l=Z(t,L,{delay:te,duration:T}),l.start())}),n=!0)},o(e){l&&l.invalidate(),e&&(s=ee(t,L,{duration:T})),n=!1},d(e){e&&_(t),e&&s&&s.end()}}}function ge(i){let t,a="8",l,s,n;return{c(){t=b("div"),t.textContent=a,this.h()},l(e){t=k(e,"DIV",{class:!0,"data-svelte-h":!0}),J(t)!=="svelte-180rca2"&&(t.textContent=a),this.h()},h(){f(t,"class","eight svelte-16owix8")},m(e,o){S(e,t,o),n=!0},p(e,o){},i(e){n||(e&&W(()=>{n&&(s&&s.end(1),l=Z(t,L,{delay:te,duration:T}),l.start())}),n=!0)},o(e){l&&l.invalidate(),e&&(s=ee(t,L,{duration:T})),n=!1},d(e){e&&_(t),e&&s&&s.end()}}}function ye(i){let t,a,l,s;const n=[ge,ve],e=[];function o(r,c){return r[0]==null?0:1}return l=o(i),s=e[l]=n[l](i),{c(){t=b("div"),a=b("div"),s.c(),this.h()},l(r){t=k(r,"DIV",{class:!0});var c=D(t);a=k(c,"DIV",{class:!0});var u=D(a);s.l(u),u.forEach(_),c.forEach(_),this.h()},h(){f(a,"class","inner-circle svelte-16owix8"),f(t,"class","outer-circle svelte-16owix8"),j(t,"shake",i[1])},m(r,c){S(r,t,c),p(t,a),e[l].m(a,null)},p(r,[c]){let u=l;l=o(r),l===u?e[l].p(r,c):(ce(),O(e[u],1,1,()=>{e[u]=null}),ue(),s=e[l],s?s.p(r,c):(s=e[l]=n[l](r),s.c()),G(s,1),s.m(a,null)),c&2&&j(t,"shake",r[1])},i(r){G(s)},o(r){O(s)},d(r){r&&_(t),e[l].d()}}}const T=3e3,te=3e3,B=3e3;function be(i,t,a){const l=["It is certain","It is decidedly so","Without a doubt","Yes definitely","You may rely on it","As I see it, yes","Most likely","Outlook good","Yes","Signs point to yes","Reply hazy, try again","Ask again later","Better not tell you now","Cannot predict now","Concentrate and ask again","Don't count on it","My reply is no","My sources say no","Outlook not so good","Very doubtful"];let s,n=!1;const e=async()=>{a(1,n=!0),await q(B),a(1,n=!1)};return[s,n,async()=>new Promise(async(r,c)=>{e();let u=me(0,l.length-1);a(0,s=l[u]),await q(B+T),e(),a(0,s=void 0),await q(B+T),r()})]}class ke extends Q{constructor(t){super(),X(this,t,be,ye,K,{roll:2})}get roll(){return this.$$.ctx[2]}}function we(i){let t,a="",l,s,n,e,o,r="Type !8ball { yes or no question }",c,u,m,M,v,h,R,I=i[2].replace(P,"")+"",g,A,w,U,se={};return m=new ke({props:se}),i[3](m),{c(){t=b("script"),t.innerHTML=a,s=b("link"),n=x(),e=b("div"),o=b("div"),c=N(r),u=x(),de(m.$$.fragment),M=x(),v=b("div"),h=N(i[1]),R=N(" - "),g=N(I),this.h()},l(d){const y=ne("svelte-18uzujo",document.head);t=k(y,"SCRIPT",{src:!0,"data-svelte-h":!0}),J(t)!=="svelte-i7ndq0"&&(t.innerHTML=a),s=k(y,"LINK",{href:!0,rel:!0,type:!0}),y.forEach(_),n=$(d),e=k(d,"DIV",{role:!0,tabindex:!0,class:!0});var E=D(e);o=k(E,"DIV",{class:!0});var Y=D(o);c=C(Y,r),Y.forEach(_),u=$(E),_e(m.$$.fragment,E),M=$(E),v=k(E,"DIV",{class:!0});var V=D(v);h=C(V,i[1]),R=C(V," - "),g=C(V,I),V.forEach(_),E.forEach(_),this.h()},h(){le(t.src,l="/tarot/tmi.min.js")||f(t,"src",l),f(s,"href","http://fonts.googleapis.com/css?family=Roboto"),f(s,"rel","stylesheet"),f(s,"type","text/css"),f(o,"class","instructions svelte-17mn1a5"),f(v,"class","description svelte-17mn1a5"),f(e,"role","button"),f(e,"tabindex","0"),f(e,"class","widget svelte-17mn1a5")},m(d,y){p(document.head,t),p(document.head,s),S(d,n,y),S(d,e,y),p(e,o),p(o,c),p(e,u),fe(m,e,null),p(e,M),p(e,v),p(v,h),p(v,R),p(v,g),A=!0,w||(U=[z(e,"click",i[4]),z(e,"keydown",i[5])],w=!0)},p(d,[y]){const E={};m.$set(E),(!A||y&2)&&F(h,d[1]),(!A||y&4)&&I!==(I=d[2].replace(P,"")+"")&&F(g,I)},i(d){A||(G(m.$$.fragment,d),A=!0)},o(d){O(m.$$.fragment,d),A=!1},d(d){d&&(_(n),_(e)),_(t),_(s),i[3](null),he(m),w=!1,ae(U)}}}const H="None",Ee="None",P="!8ball ";function Ie(i,t,a){let l;oe(i,pe,h=>a(7,l=h));let s,n=[],e,o=H,r=Ee;re(async()=>{s=l.url.searchParams.get("username"),c()});const c=()=>{const h=new window.tmi.Client({channels:[s]});h.connect(),h.on("message",(R,I,g,A)=>{let w=I["display-name"];w!==void 0&&(console.log(`${w}: ${g}`),g.includes(P)&&(n.length==0?(n.push({name:w,message:g}),u()):n.push({name:w,message:g})))})},u=async()=>{a(1,o=n[0].name),a(2,r=n[0].message),o==null&&a(1,o=H),await e.roll(),n.shift(),n.length>0&&e.roll()};function m(h){ie[h?"unshift":"push"](()=>{e=h,a(0,e)})}return[e,o,r,m,()=>e.roll(),()=>e.roll()]}class Se extends Q{constructor(t){super(),X(this,t,Ie,we,K,{})}}export{Se as component};
