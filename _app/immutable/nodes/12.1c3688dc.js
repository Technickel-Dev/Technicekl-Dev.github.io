import{K as te,s as se,e as E,a as P,l as re,c as y,m as X,f as _,g as q,b as O,z as G,o as w,y as j,h as L,i as A,H as Z,J as ae,k as ne,D as ie,t as J,d as K,j as U,L as Q}from"../chunks/scheduler.48785eb3.js";import{S as le,i as oe,c as ce,a as ue,m as fe,t as B,b as W,e as de,d as ve,f as N,g as me}from"../chunks/index.214faea7.js";import{p as _e}from"../chunks/stores.9248e368.js";import{C as pe}from"../chunks/circularProgress.a8d700dc.js";function z(r,{delay:a=0,duration:c=400,easing:g=te}={}){const d=+getComputedStyle(r).opacity;return{delay:a,duration:c,easing:g,css:t=>`opacity: ${t*d}`}}const $=[{name:"Ace of cups",image:"ace_of_cups",description:"Represents new emotional beginnings, love, and creative inspiration. It symbolizes fresh emotions, deep connections, and a positive outlook on relationships.",reverse_description:"In reverse, indicates obstacles in establishing meaningful emotional connections, creative hindrances, and unresolved inner conflicts. There may be a need for emotional healing and self-reflection."}];function x(r){let a,c,g,d,t,D=r[3].name+"",h,I,u,v,f=(r[1]?r[3].reverse_description:r[3].description)+"",C,m,l;return{c(){a=E("div"),c=J(r[2]),d=P(),t=E("div"),h=J(D),u=P(),v=E("div"),C=J(f),this.h()},l(e){a=y(e,"DIV",{class:!0});var n=O(a);c=K(n,r[2]),n.forEach(_),d=q(e),t=y(e,"DIV",{class:!0});var T=O(t);h=K(T,D),T.forEach(_),u=q(e),v=y(e,"DIV",{class:!0});var b=O(v);C=K(b,f),b.forEach(_),this.h()},h(){w(a,"class","name svelte-1i7vgrw"),w(t,"class","card-name svelte-1i7vgrw"),j(t,"reverse",r[1]),w(v,"class","card-description svelte-1i7vgrw")},m(e,n){A(e,a,n),L(a,c),A(e,d,n),A(e,t,n),L(t,h),A(e,u,n),A(e,v,n),L(v,C),l=!0},p(e,n){(!l||n&4)&&U(c,e[2]),(!l||n&8)&&D!==(D=e[3].name+"")&&U(h,D),(!l||n&2)&&j(t,"reverse",e[1]),(!l||n&10)&&f!==(f=(e[1]?e[3].reverse_description:e[3].description)+"")&&U(C,f)},i(e){l||(e&&Q(()=>{l&&(g||(g=N(a,z,{},!0)),g.run(1))}),e&&Q(()=>{l&&(I||(I=N(t,z,{},!0)),I.run(1))}),e&&Q(()=>{l&&(m||(m=N(v,z,{},!0)),m.run(1))}),l=!0)},o(e){e&&(g||(g=N(a,z,{},!1)),g.run(0)),e&&(I||(I=N(t,z,{},!1)),I.run(0)),e&&(m||(m=N(v,z,{},!1)),m.run(0)),l=!1},d(e){e&&(_(a),_(d),_(t),_(u),_(v)),e&&g&&g.end(),e&&I&&I.end(),e&&m&&m.end()}}}function ge(r){let a,c="",g,d,t,D,h,I,u,v,f,C,m,l,e='<p class="back-text svelte-1i7vgrw">Type !tarot to get a reading</p>',n,T,b,V,k;h=new pe({props:{value:r[4]}});let o=r[0]&&x(r);return{c(){a=E("script"),a.innerHTML=c,d=P(),t=E("div"),D=E("div"),ce(h.$$.fragment),I=P(),u=E("div"),v=E("div"),f=E("img"),m=P(),l=E("div"),l.innerHTML=e,n=P(),T=E("div"),o&&o.c(),this.h()},l(s){const p=re("svelte-1nbh741",document.head);a=y(p,"SCRIPT",{src:!0,"data-svelte-h":!0}),X(a)!=="svelte-i7ndq0"&&(a.innerHTML=c),p.forEach(_),d=q(s),t=y(s,"DIV",{class:!0,role:!0});var S=O(t);D=y(S,"DIV",{class:!0});var i=O(D);ue(h.$$.fragment,i),i.forEach(_),I=q(S),u=y(S,"DIV",{class:!0});var M=O(u);v=y(M,"DIV",{class:!0});var Y=O(v);f=y(Y,"IMG",{src:!0,alt:!0,class:!0}),Y.forEach(_),m=q(M),l=y(M,"DIV",{class:!0,"data-svelte-h":!0}),X(l)!=="svelte-7l81gw"&&(l.innerHTML=e),M.forEach(_),S.forEach(_),n=q(s),T=y(s,"DIV",{class:!0});var R=O(T);o&&o.l(R),R.forEach(_),this.h()},h(){G(a.src,g="/tarot/tmi.min.js")||w(a,"src",g),w(D,"class","progress-container svelte-1i7vgrw"),G(f.src,C="/tarot/"+r[3].image+".jpg")||w(f,"src",C),w(f,"alt","Tarot Card"),w(f,"class","svelte-1i7vgrw"),j(f,"reverse",r[1]),w(v,"class","front svelte-1i7vgrw"),w(l,"class","back svelte-1i7vgrw"),w(u,"class","card svelte-1i7vgrw"),j(u,"active",r[0]),w(t,"class","container svelte-1i7vgrw"),w(t,"role","main"),w(T,"class","text-container svelte-1i7vgrw")},m(s,p){L(document.head,a),A(s,d,p),A(s,t,p),L(t,D),fe(h,D,null),L(t,I),L(t,u),L(u,v),L(v,f),L(u,m),L(u,l),A(s,n,p),A(s,T,p),o&&o.m(T,null),b=!0,V||(k=[Z(t,"mouseenter",r[5]),Z(t,"mouseleave",r[6])],V=!0)},p(s,[p]){const S={};p&16&&(S.value=s[4]),h.$set(S),(!b||p&8&&!G(f.src,C="/tarot/"+s[3].image+".jpg"))&&w(f,"src",C),(!b||p&2)&&j(f,"reverse",s[1]),(!b||p&1)&&j(u,"active",s[0]),s[0]?o?(o.p(s,p),p&1&&B(o,1)):(o=x(s),o.c(),B(o,1),o.m(T,null)):o&&(me(),W(o,1,1,()=>{o=null}),de())},i(s){b||(B(h.$$.fragment,s),B(o),b=!0)},o(s){W(h.$$.fragment,s),W(o),b=!1},d(s){s&&(_(d),_(t),_(n),_(T)),_(a),ve(h),o&&o.d(),V=!1,ae(k)}}}const he=1e3,ee=2e4,H=1500;function Ie(r,a,c){let g,d,t;ne(r,_e,i=>c(14,t=i));const D=2*H;let h,I=0,u=!1,v=!1,f=!1,C=!1,m=[],l="hello-world",e=$[0],n=0,T=0;ie(async()=>{h=t.url.searchParams.get("username"),c(7,I=parseInt(t.url.searchParams.get("cardDelaySeconds"))),S()});const b=i=>{if(i){let M=i*he;return M>D?M:ee}return ee},V=()=>{c(0,u=!0)},k=()=>{c(0,u=!1)},o=i=>{const M=Math.floor(Math.random()*i.length);return i[M]},s=()=>{let i=Math.random()*100;console.log("Reverse Chance:",i),c(1,v=i<25),c(3,e=o($))},p=()=>{c(8,n=Date.now()),C||(c(9,T=n+d),C=!0,console.log("Inititalize time"));let i=T-n;if(u&&i>d-H?(k(),console.log("Hide card")):!f&&i>H&&i<=d-H?(c(2,l=m[0]),s(),f=!0,console.log("Initialize card")):!u&&i>H&&i<=d-H&&(V(),console.log("Show card")),i<=0){m.shift(),f=!1,C=!1,m.length>0?(console.log("Next in queue"),setTimeout(p,100)):(console.log("All out of cards, STOOOOOP"),k());return}setTimeout(p,100)},S=()=>{const i=new window.tmi.Client({channels:[h]});i.connect(),i.on("message",(M,Y,R,Te)=>{let F=Y["display-name"];console.log(`${F}: ${R}`),R=="!tarot"&&(m.length==0?(m.push(F),p()):m.push(F))})};return r.$$.update=()=>{r.$$.dirty&128&&c(10,d=b(I)),r.$$.dirty&1792&&c(4,g=100-(T-n)/d*100|0)},[u,v,l,e,g,V,k,I,n,T,d]}class Ee extends le{constructor(a){super(),oe(this,a,Ie,ge,se,{})}}export{Ee as component};
