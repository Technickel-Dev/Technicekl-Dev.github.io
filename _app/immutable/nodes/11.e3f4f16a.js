import{s as ye,e as g,c as w,b as x,r as G,f as r,o as y,i as M,h as p,n as ie,F as Ie,I as ce,a as L,t as Z,z as Ee,g as k,d as W,L as xe,B as de,j as le,N as Pe,k as De}from"../chunks/scheduler.e43ee5f3.js";import{S as be,i as Ce,c as he,b as pe,m as fe,t as _e,a as me,d as ge}from"../chunks/index.9c613d38.js";import{p as Se}from"../chunks/stores.57059b7e.js";import{r as we,w as Ne,s as Ae}from"../chunks/utils.547bbd9e.js";import{C as Ve}from"../chunks/circularProgress.3191d550.js";function Le(v){let l,t,s='<div class="cell dollar svelte-lechau">100</div> <div class="cell green svelte-lechau">5</div> <div class="cell svelte-lechau">90</div> <div class="cell svelte-lechau">25</div> <div class="cell svelte-lechau">70</div> <div class="cell svelte-lechau">45</div> <div class="cell svelte-lechau">10</div> <div class="cell svelte-lechau">65</div> <div class="cell svelte-lechau">30</div> <div class="cell svelte-lechau">85</div> <div class="cell svelte-lechau">50</div> <div class="cell svelte-lechau">95</div> <div class="cell svelte-lechau">55</div> <div class="cell svelte-lechau">75</div> <div class="cell svelte-lechau">40</div> <div class="cell svelte-lechau">20</div> <div class="cell svelte-lechau">60</div> <div class="cell svelte-lechau">35</div> <div class="cell svelte-lechau">80</div> <div class="cell green svelte-lechau">15</div>';return{c(){l=g("div"),t=g("div"),t.innerHTML=s,this.h()},l(m){l=w(m,"DIV",{class:!0});var i=x(l);t=w(i,"DIV",{class:!0,"data-svelte-h":!0}),G(t)!=="svelte-18g45xq"&&(t.innerHTML=s),i.forEach(r),this.h()},h(){y(t,"class","wheel svelte-lechau"),y(l,"class","container svelte-lechau")},m(m,i){M(m,l,i),p(l,t),v[2](t)},p:ie,i:ie,o:ie,d(m){m&&r(l),v[2](null)}}}const ke=4e3,He=5;function qe(v,l,t){let s;Ie(()=>{m()});const m=()=>{let a=s.querySelectorAll("div"),c=360/a.length,u=Math.round(a[0].offsetHeight/2/Math.tan(Math.PI/a.length));a.forEach((n,f)=>{let b=c*f;n.style.transform=`rotateX(${b}deg) translateZ(${u}px)`}),t(0,s.style.transform=`translateZ(${-u}px) rotateX(0deg)`,s)},i=()=>{let a=s.querySelectorAll("div"),c=360/a.length,u=Math.round(a[0].offsetHeight/2/Math.tan(Math.PI/a.length)),n=we(0,a.length-1);return new Promise(async(f,b)=>{t(0,s.style.transition=`all ${ke}ms cubic-bezier(.34,-0.21,.51,1.02)`,s);let T=we(-c/2+1,c/2-1),_=He*360+n*c+T;t(0,s.style.transform=`translateZ(${-u}px) rotateX(${-_}deg)`,s),await Ne(s),t(0,s.style.transition="none",s),_=_%360,t(0,s.style.transform=`translateZ(${-u}px) rotateX(${-_}deg)`,s),f(n)})};function h(a){ce[a?"unshift":"push"](()=>{s=a,t(0,s)})}return[s,i,h]}class Ue extends be{constructor(l){super(),Ce(this,l,qe,Le,ye,{spin:1})}get spin(){return this.$$.ctx[1]}}function Be(v){let l,t="",s,m,i,h,a,c,u,n,f,b="Top",T,_,H=(v[4]||P)+"",D,q,U=(v[5]||0)+"",R,F,C,o,E,j,I,S,N="Current",ne,B,z=(v[2]||P)+"",J,ae,O=(v[3]||0)+"",K,Q,A,oe='<p class="svelte-1swun8e">Type !wheel to spin the wheel</p> <p class="svelte-1swun8e">Type !spinagain to spin again after first</p> <p class="svelte-1swun8e">Ties top make both people go again!</p>',V,re,ue,Me={};h=new Ue({props:Me}),v[7](h);let Te={value:Re};return E=new Ve({props:Te}),v[10](E),{c(){l=g("script"),l.innerHTML=t,m=L(),i=g("div"),he(h.$$.fragment),a=L(),c=g("div"),u=L(),n=g("div"),f=g("p"),f.textContent=b,T=L(),_=g("p"),D=Z(H),q=Z(" - "),R=Z(U),F=L(),C=g("div"),o=g("div"),he(E.$$.fragment),j=L(),I=g("div"),S=g("p"),S.textContent=N,ne=L(),B=g("p"),J=Z(z),ae=Z(" - "),K=Z(O),Q=L(),A=g("div"),A.innerHTML=oe,this.h()},l(e){const d=Ee("svelte-1nbh741",document.head);l=w(d,"SCRIPT",{src:!0,"data-svelte-h":!0}),G(l)!=="svelte-i7ndq0"&&(l.innerHTML=t),d.forEach(r),m=k(e),i=w(e,"DIV",{class:!0,role:!0,tabindex:!0});var Y=x(i);pe(h.$$.fragment,Y),Y.forEach(r),a=k(e),c=w(e,"DIV",{class:!0}),x(c).forEach(r),u=k(e),n=w(e,"DIV",{class:!0});var X=x(n);f=w(X,"P",{class:!0,"data-svelte-h":!0}),G(f)!=="svelte-5heo4a"&&(f.textContent=b),T=k(X),_=w(X,"P",{});var $=x(_);D=W($,H),q=W($," - "),R=W($,U),$.forEach(r),X.forEach(r),F=k(e),C=w(e,"DIV",{class:!0});var ee=x(C);o=w(ee,"DIV",{class:!0});var ve=x(o);pe(E.$$.fragment,ve),ve.forEach(r),j=k(ee),I=w(ee,"DIV",{class:!0});var te=x(I);S=w(te,"P",{class:!0,"data-svelte-h":!0}),G(S)!=="svelte-1m47tik"&&(S.textContent=N),ne=k(te),B=w(te,"P",{});var se=x(B);J=W(se,z),ae=W(se," - "),K=W(se,O),se.forEach(r),te.forEach(r),ee.forEach(r),Q=k(e),A=w(e,"DIV",{class:!0,"data-svelte-h":!0}),G(A)!=="svelte-s4x46p"&&(A.innerHTML=oe),this.h()},h(){xe(l.src,s="/tarot/tmi.min.js")||y(l,"src",s),y(i,"class","container svelte-1swun8e"),y(i,"role","button"),y(i,"tabindex","0"),y(c,"class","arrow svelte-1swun8e"),y(f,"class","underline svelte-1swun8e"),y(n,"class","screen top svelte-1swun8e"),y(o,"class","progress-container svelte-1swun8e"),y(S,"class","underline svelte-1swun8e"),y(I,"class","current-text"),y(C,"class","screen current svelte-1swun8e"),y(A,"class","instructions svelte-1swun8e")},m(e,d){p(document.head,l),M(e,m,d),M(e,i,d),fe(h,i,null),M(e,a,d),M(e,c,d),M(e,u,d),M(e,n,d),p(n,f),p(n,T),p(n,_),p(_,D),p(_,q),p(_,R),M(e,F,d),M(e,C,d),p(C,o),fe(E,o,null),p(C,j),p(C,I),p(I,S),p(I,ne),p(I,B),p(B,J),p(B,ae),p(B,K),M(e,Q,d),M(e,A,d),V=!0,re||(ue=[de(i,"click",v[8]),de(i,"keypress",v[9])],re=!0)},p(e,[d]){const Y={};h.$set(Y),(!V||d&16)&&H!==(H=(e[4]||P)+"")&&le(D,H),(!V||d&32)&&U!==(U=(e[5]||0)+"")&&le(R,U);const X={};E.$set(X),(!V||d&4)&&z!==(z=(e[2]||P)+"")&&le(J,z),(!V||d&8)&&O!==(O=(e[3]||0)+"")&&le(K,O)},i(e){V||(_e(h.$$.fragment,e),_e(E.$$.fragment,e),V=!0)},o(e){me(h.$$.fragment,e),me(E.$$.fragment,e),V=!1},d(e){e&&(r(m),r(i),r(a),r(c),r(u),r(n),r(F),r(C),r(Q),r(A)),r(l),v[7](null),ge(h),v[10](null),ge(E),re=!1,Pe(ue)}}}const P="None";var Re=0;function Fe(v,l,t){let s;De(v,Se,o=>t(14,s=o));const m=[100,5,90,25,70,45,10,65,30,85,50,95,55,75,40,20,60,35,80,15];let i,h,a,c=[],u=P,n=0,f=P,b=0,T=!1,_=0;Ie(async()=>{i=s.url.searchParams.get("username"),H()});const H=()=>{const o=new window.tmi.Client({channels:[i]});o.connect(),o.on("message",(E,j,I,S)=>{let N=j["display-name"];N!==void 0&&(console.log(`${N}: ${I}`),I=="!wheel"&&(c.length==0?(c.push(N),q()):c.push(N)),I=="!spinagain"&&N==u&&(T=!0))})},D=()=>{_>0?(T=!0,_=0):(_=1,q())},q=async()=>{t(2,u=c[0]),u==null&&t(2,u=P);let o=await h.spin();t(3,n=m[o]),a.timedProgress(15e3),await Ae(15e3),T==!0&&(o=await h.spin(),t(3,n+=m[o])),n>b&&n<=100?(t(4,f=u),t(5,b=n)):n==b&&(c.unshift(u),c.unshift(f),t(4,f=P),t(5,b=0)),c.shift(),t(3,n=0),t(2,u=P),T=!1,c.length>0&&q()};function U(o){ce[o?"unshift":"push"](()=>{h=o,t(0,h)})}const R=()=>D(),F=()=>D();function C(o){ce[o?"unshift":"push"](()=>{a=o,t(1,a)})}return[h,a,u,n,f,b,D,U,R,F,C]}class Oe extends be{constructor(l){super(),Ce(this,l,Fe,Be,ye,{})}}export{Oe as component};
